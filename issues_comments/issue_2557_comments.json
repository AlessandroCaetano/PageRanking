[{"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/4f4b696adc8e8769f43b5c837b3ea23b?s=40&d=identicon", "id": 6, "name": "Marisa Souza dos Santos", "username": "marisa"}, "id": 13202, "body": "_Status changed to closed_", "created_at": "2016-05-19T13:56:21.580Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/4f4b696adc8e8769f43b5c837b3ea23b?s=40&d=identicon", "id": 6, "name": "Marisa Souza dos Santos", "username": "marisa"}, "id": 13201, "body": "_Status changed to reopened_", "created_at": "2016-05-19T13:56:15.241Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/16c836bf4f8b24fb02eea81242d3a773?s=40&d=identicon", "id": 365, "name": "Gustavo Duarte", "username": "gustavold"}, "id": 12923, "body": "Legal David! Rodei a \u00faltima vers\u00e3o do script de deploy do Gitlab... finalizou com sucesso e o Gitlab subiu perfeitamente.\r\nFiz uns testes bem b\u00e1sicos: troquei a senha do usu\u00e1rio, naveguei nos projetos existentes (do backup), criei um novo projeto, fiz um clone do projeto, criei um novo commit e fiz push para o reposit\u00f3rio... tudo funcionou perfeitamente.\r\n\r\nComo voc\u00ea mencionou, seriam necess\u00e1rios testes mais exaustivos e de integra\u00e7\u00e3o antes de colocar em produ\u00e7\u00e3o, mas com rela\u00e7\u00e3o ao empacotamento est\u00e1 OK.", "created_at": "2016-05-17T00:25:35.581Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/bd4a075a0ea744c8d171c93e95a6f1da?s=40&d=identicon", "id": 45, "name": "David Silva", "username": "davidcarlos"}, "id": 12872, "body": "_Status changed to closed_", "created_at": "2016-05-16T14:54:05.128Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/bd4a075a0ea744c8d171c93e95a6f1da?s=40&d=identicon", "id": 45, "name": "David Silva", "username": "davidcarlos"}, "id": 12871, "body": "No reposit\u00f3rio https://softwarepublico.gov.br/gitlab/gustavold/gitlab-provisioning foi feito um provision.sh que realiza, de maneira geral os seguintes passos:\r\n \r\n-  Cria uma vm centos limpa\r\n- Configura nginx\r\n- Instala o gitlab 7.6\r\n- Caso exista um backup, restaura o mesmo no gitlab 7.6\r\n- Atualiza o gitlab 7.6 para o gitlab 8.5\r\n\r\nCom esse script conseguimos responder as seguintes quest\u00f5es:\r\n   \r\n- \u00c9 poss\u00edvel migrar do gitlab 7.6 para o gitlab 8.5 diretamente\r\n- O gitlab 8.5 reconhece um dump do gitlab 7.6\r\n\r\nDuvidas que n\u00e3o teremos tempo de responder:\r\n      \r\n- O gitlab 8.5 funcionar\u00e1 bem, quando integrado com as outras ferramentas do portal?\r\n- Talvez outras d\u00favidas existam, mas n\u00e3o fizemos os testes necess\u00e1rios pra saber o que pode est\u00e1 quebrando ou n\u00e3o.\r\n\r\nPara subir esse ambiente basta fazer:\r\n\r\n- clone o reposit\u00f3rio\r\n- vagrant up (vai demorar um pouco)\r\n\r\nPara acessar o gitlab adicione no seu /etc/hosts\r\n\r\n      - 10.0.3.17       gitlab.dev\r\n\r\nAcesse no navegador: http://gitlab.dev:8081/gitlab/\r\n\r\nVoc\u00ea pode logar no gitlab usando\r\n     \r\n     - username: devroot\r\n     - password: 5iveL!fe\r\n\r\n\r\n\r\n", "created_at": "2016-05-16T14:53:57.165Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/bd4a075a0ea744c8d171c93e95a6f1da?s=40&d=identicon", "id": 45, "name": "David Silva", "username": "davidcarlos"}, "id": 11970, "body": "_mentioned in issue #804_", "created_at": "2016-04-28T17:06:20.819Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/bd4a075a0ea744c8d171c93e95a6f1da?s=40&d=identicon", "id": 45, "name": "David Silva", "username": "davidcarlos"}, "id": 11967, "body": "_mentioned in issue #799_", "created_at": "2016-04-28T17:05:11.018Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/bd4a075a0ea744c8d171c93e95a6f1da?s=40&d=identicon", "id": 45, "name": "David Silva", "username": "davidcarlos"}, "id": 11962, "body": "@gustavold o spec \u00e9 esse mesmo, a tarball voc\u00ea pode pegar no copr(https://copr-be.cloud.fedoraproject.org/results/softwarepublico/v5/epel-7-x86_64/00145690-gitlab/) ou gerar a partir do reposit\u00f3rio de dev do gitlab https://github.com/gitlabhq/gitlabhq", "created_at": "2016-04-28T15:53:44.411Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/bd4a075a0ea744c8d171c93e95a6f1da?s=40&d=identicon", "id": 45, "name": "David Silva", "username": "davidcarlos"}, "id": 11960, "body": "@gustavold, eu subi o env aqui. Neste http://paste.debian.net/444168/ respondi o porque daquelas coisas estranhas estarem acontecendo. Tem como me adicionar nesse seu reposit\u00f3rio? Vou come\u00e7ar o script de restore do backup.", "created_at": "2016-04-28T15:42:45.834Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/16c836bf4f8b24fb02eea81242d3a773?s=40&d=identicon", "id": 365, "name": "Gustavo Duarte", "username": "gustavold"}, "id": 11852, "body": "Criei um script pra subir um ambiente com o gitlab (vers\u00e3o de prod):\r\n\r\n```\r\ngit clone http://softwarepublico.gov.br/gitlab/gustavold/gitlab-provisioning.git\r\ncd gitlab-provisioning/\r\nvagrant up --provider=virtualbox\r\n# Pra acessar o gitlab: http://localhost:8081/gitlab\r\n```\r\n\r\nO pr\u00f3ximo passo \u00e9 criar um script para carregar o backup e outro script pra fazer o update para o gitlab-8.x.\r\n\r\nRepare que com essa vers\u00e3o j\u00e1 d\u00e1 uns erros na instala\u00e7\u00e3o do pacote do gitlab (provavelmente n\u00e3o ocorre em prod por ter alguma conf diferente).\r\n\r\n@davidcarlos d\u00e1 uma olhada l\u00e1 no script e veja se eu deixei passar algo importante.\r\n\r\n[]'s\r\nGustavo", "created_at": "2016-04-26T05:57:48.476Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/16c836bf4f8b24fb02eea81242d3a773?s=40&d=identicon", "id": 365, "name": "Gustavo Duarte", "username": "gustavold"}, "id": 11842, "body": "@davidcarlos, seria legal se tiv\u00e9ssemos uma receita chef para levantar um ambiente do gitlab separado do restante do SPB... assim ter\u00edamos certeza que estamos trabalhando no mesmo ambiente.\r\n\r\nPara instalar o pacote antigo do gitlab, eu segui a receita do SPB: https://softwarepublico.gov.br/gitlab/softwarepublico/softwarepublico/blob/master/cookbooks/gitlab/recipes/default.rb\r\n\r\nQual reposit\u00f3rio voc\u00ea est\u00e1 utilizando para desenvolvimento do pacote do gitlab? Encontrei o spec aqui: https://softwarepublico.gov.br/gitlab/softwarepublico/softwarepublico/blob/master/src/pkg-rpm/gitlab/gitlab.spec mas n\u00e3o encontrei o restante do pacote.", "created_at": "2016-04-25T22:21:26.234Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/bd4a075a0ea744c8d171c93e95a6f1da?s=40&d=identicon", "id": 45, "name": "David Silva", "username": "davidcarlos"}, "id": 11738, "body": "@gustavold, eu n\u00e3o consegui reproduzir os problemas que voc\u00ea tinha me relatado nesse teste que eu fiz", "created_at": "2016-04-19T21:08:19.801Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/bd4a075a0ea744c8d171c93e95a6f1da?s=40&d=identicon", "id": 45, "name": "David Silva", "username": "davidcarlos"}, "id": 11737, "body": "Hoje fiz alguns testes com o ultimo pacote que est\u00e1 no copr (8.5.12). Criei uma vm limpa, instalei o gitlab 7.6, e dei o update para o gitlab 8.5. Tive que fazer basicamente 3 coisas de maneira manual, para que o pacote iniciasse seus servi\u00e7os corretamente.\r\n\r\n- Arrumar o path para o arquivo de log do gitlab workhorse (Arrumarei isso via spec)\r\n- Rodar as migrations (Obrigat\u00f3rio, mas talvez n\u00e3o ser\u00e1 um passo que ir\u00e1 ficar no pacote, e sim na receita chef).\r\n- Criar o usu\u00e1rio admin no banco (Talvez esse passo n\u00e3o seja necess\u00e1rio devido ao backup, irei investigar se j\u00e1 existe um usu\u00e1rio admin nele)\r\n\r\nEu executei o comando : sudo yum update gitlab, e tirando os tr\u00eas passos acima, o pacote foi atualizado corretamente.\r\n\r\nVale ressaltar que configura\u00e7\u00f5es do redis, do banco de dados, e cria\u00e7\u00e3o de um usu\u00e1rio git na m\u00e1quina _n\u00e3o s\u00e3o de atribui\u00e7\u00e3o do pacote_, logo s\u00e3o coisas que j\u00e1 est\u00e3o nas receitas chef do portal.\r\n\r\nO pacote mais novo do gitlab (8.5.x) est\u00e1 no reposit\u00f3rio experimental do softwarepublico no copr.\r\n\r\n", "created_at": "2016-04-19T21:05:59.813Z", "attachment": null}, {"author": {"state": "active", "avatar_url": "http://cdn.libravatar.org/avatar/bd4a075a0ea744c8d171c93e95a6f1da?s=40&d=identicon", "id": 45, "name": "David Silva", "username": "davidcarlos"}, "id": 11066, "body": "@gustavold como anda a quest\u00e3o da integra\u00e7\u00e3o do Gitlab com o Colab? algum avan\u00e7o?", "created_at": "2016-04-12T00:54:52.480Z", "attachment": null}]